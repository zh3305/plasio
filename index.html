<!DOCTYPE html>
<html lang="zh">
	<head>
		<title>plas.io</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="css/style.css" type="text/css">
		<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Archivo+Black' rel='stylesheet' type='text/css'>
	</head>
	<body data-custom-load="true" data-name="plasio_laszip"
		data-tools="" data-configs="" data-path="">
		<div class="fullscreen">
			<div class="title">
				<div class="name">plas.io</div>
				<div id="no-support">抱歉,您的浏览器不支持WebGL。<a href="http://get.webgl.org">了解更多</a>。</div>
			</div>
		</div>
		<div id="progressBar" style="display: none">
		</div>

		<div class="drag-and-drop" style="display: none">
			<div class="title">
				拖放到这里!
			</div>
		</div>
		<div class="ui-layout-center">
			<div id="container"></div>
			<div id="fps"></div>
			<div id="messages"></div>
			<div id="pointCount"></div>
            <div id="credits" style="display: none"></div>
		</div>
		<div class="ui-layout-east">
			<input id="filebrowser" type="file" style="display:none" multiple>
			<div id="mainActions">
				<div class="title">
					<h1>plas.io</h1>
					<a href="https://github.com/verma/plasio"><img style="position: absolute; top: 0; right: 0; border: 0; width:128px; height: 128px;" src="https://github-camo.global.ssl.fastly.net/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="在GitHub上Fork" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
				</div>
				<div class="section">
					<div id="webglinfo" style="display: none"> </div>
					<div class="p-head">
						<h3>文件</h3>
					</div>
					<div class="p-body">
						<div id="naclerror" style="display: none"> </div>
						<div class="labeled-controls">
							<a class='doc-tag' href="docs/open-a-file.json"><span class="glyphicon glyphicon-question-sign"></span></a>
							<h4>选择要显示的数据</h4>
							<h5>选择您自己的文件或点击下拉菜单查看示例</h5>
							<div class="btn-group btn-block" id="browseCancel" style="display: none">
								<button type="button" class="btn btn-default btn-sm">取消</button>
							</div>
							<div class="btn-group btn-block" id="browse">
								<button type="button" class="btn btn-default btn-sm btn-file dropdown-lead">
									浏览
								</button>
								<button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">
									<span class="caret"></span>
									<span class="sr-only">切换下拉菜单</span>
								</button>
								<ul class="dropdown-menu btn-block" role="menu">
									<li><a href="data/st-helens.laz">圣海伦斯山</a></li>
									<li><a href="data/half-dome.laz">半穹顶</a></li>
									<li><a href="data/autzen.laz">奥茨恩体育场</a></li>
									<li><a href="data/spaceshuttle.laz">航天飞机</a></li>
									<li><a href="data/jack.laz">巨人杀手杰克</a></li>
									<li><a href="data/mapserver-family-portrait.laz">地图服务器全家福</a></li>
									<li><a href="data/iowa-bridge.laz">爱荷华锡达福尔斯大学大道</a></li>
								</ul>
							</div>
							<div id="loadingStatus" class="pull-left"></div>
							<div id="creditsLink">
								<a data-toggle="modal" href="#" data-target="#creditsPage">数据来源</a>
							</div>
						</div>

						<div class="labeled-controls">
							<a class='doc-tag' href="docs/density.json"><span class="glyphicon glyphicon-question-sign"></span></a>
							<h4>密度</h4>
							<h5>设置加载密度。较小的值加载和显示更快。重新打开文件以新密度加载。</h5>
							<div id="loadFidelity"></div>
						</div>
						<div id="loadError"></div>
						<div class="props" style="display:none">
							<div class="labeled-controls">
								<h4>数据集</h4>
								<h5 class='switch-inst'>在多个数据集之间切换</h5>
								<div id="multi-files"></div>
								<div class="auto-play" style="display: none">
									<h5>调整滑块以自动切换文件</h5>
									<div id="playback-rate"></div>
									<div id='playback-fps'></div>
								</div>
								<table class="table">
								</table>
							</div>
						</div>

						<div class="labeled-controls">
							<h4>比例参考物</h4>
							<a class='doc-tag' href="docs/for-scale-objects.json"><span class="glyphicon glyphicon-question-sign"></span></a>
							<h5>按住ALT键(Mac OS X上为OPTION键)并在点云上双击任意位置放置<span class='noun'>帝国大厦</span>。</h5>
							<button type="button" class="btn btn-sm btn-default btn-block" id="scale-geoms-clear">清除所有对象</button>
							<h5 class='not-first'>更改您的世界单位,使比例参考物大小保持相关性</h5>
							<div class="btn-group btn-block" id="scale-geoms-scale">
								<button type="button" class="btn btn-sm btn-default dropdown-toggle btn-block" data-toggle="dropdown" target="meters"> 米 <span class="caret"></span>
								</button>
								<ul class="dropdown-menu btn-block" role="menu">
									<li><a href="#meters">米</a></li>
									<li><a href="#feet">英尺</a></li>
									<li><a href="#inches">英寸</a></li>
								</ul>
							</div>
						</div>
					</div>
				</div>

				<div class="section">
					<div class="p-head">
						<h3>相机</h3>
					</div>
					<div class="p-body">
						<div class="labeled-controls">
							<h4>类型</h4>
							<h5>透视相机提供3D视图,而正交和俯视相机提供正交视图</h5>
							<div class="btn-group btn-group-sm btn-block" id="camera-type-group">
								<button type="button" class="btn btn-default" id="perspective">透视</button>
								<button type="button" class="btn btn-default" id="ortho">正交</button>
								<button type="button" class="btn btn-default" id="top-view">俯视</button>
							</div>
							<h4 class="not-first">重置</h4>
							<h5>将视图恢复到初始状态</h5>
							<button type="button" class="btn btn-sm btn-default btn-block" id="camera-reset">重置视图</button>
							<h4 class="not-first">视场角</h4>
							<h5>更改视场角可以产生有趣的效果,仅适用于透视相机</h5>
							<div id="fov"></div>
						</div>

						<div class="labeled-controls">
							<h4>裁剪区域</h4>
							<h5>选择查看数据的其他方式</h5>
							<div id="clipping-regions"></div>
						</div>
					</div>
				</div>

				<div class="section">
					<div class="p-head">
						<h3>数据</h3>
					</div>
					<div class="p-body">
						<div class="labeled-controls" id="points-list">
							<h4>测量</h4>
							<h5>当前视图区域中的测量段</h5>
							<button type="button" class="btn btn-sm btn-default btn-block" id="mensuration-reset">重置</button>
							<div id="points-list-table">
							</div>
						</div>
						<div class="labeled-controls">
							<h4>粒子大小</h4>
							<h5>较大的尺寸会填充显示</h5>
							<div id="pointsize"></div>
						</div>
						<div class="labeled-controls">
							<h4>高度夸张</h4>
							<h5>较高的值使高程差异更加明显</h5>
							<div id="zscale"></div>
						</div>
						<div class="labeled-controls">
							<h4>着色</h4>
							<h5>选择要着色的属性</h5>
							<div class="btn-group btn-block" id="colorsource">
								<button type="button" class="btn btn-sm btn-default btn-block dropdown-toggle" data-toggle="dropdown" target="rgb">
									RGB <span class="caret"></span>
								</button>
								<ul class="dropdown-menu btn-block" role="menu">
									<li><a href="#rgb">RGB</a></li>
									<li><a href="#classification">分类</a></li>
									<li><a class="default-if-no-color" href="#heightmap-color">高程图着色</a></li>
									<li><a href="#heightmap-color-inv">高程图着色(反转)</a></li>
								</ul>
							</div>
						</div>
						<div class="labeled-controls">
							<h4>色图</h4>
							<h5>用于高程图着色和分类着色的颜色渐变值</h5>
							<div class='btn-group btn-group-justified' id="colorSwatches">
								<a type="button" class="btn btn-default btn-sm">
									<img src="colormaps/blue-red.png" width="100%" height="10">
								</a>
								<a type="button" class="btn btn-default btn-sm">
									<img src="colormaps/blue-hue.png" width="100%" height="10">
								</a>
								<a type="button" class="btn btn-default btn-sm">
									<img src="colormaps/blue-orange.png" width="100%" height="10">
								</a>
								<a type="button" class="btn btn-default btn-sm">
									<img src="colormaps/heat-map.png" width="100%" height="10">
								</a>
								<a type="button" class="btn btn-default btn-sm">
									<img src="colormaps/awesome-green.png" width="100%" height="10">
								</a>
								<a type="button" class="btn btn-default btn-sm">
									<img src="colormaps/pestel-shades.png" width="100%" height="10">
								</a>
								<a type="button" class="btn btn-default btn-sm">
									<img src="colormaps/black-orange.png" width="100%" height="10">
								</a>
							</div>
							<div id="colorCanvas">
								<canvas id="colorCanvasObject"></canvas>
							</div>
							<div id="colormapClamp"></div>
						</div>
						<div class="labeled-controls">
							<h4>强度来源</h4>
							<h5>颜色调制器,可以调整调制</h5>
							<div class="btn-group btn-block" id="intensitysource">
								<button type="button" class="btn btn-sm btn-default btn-block dropdown-toggle" data-toggle="dropdown" target="intensity">
									强度 <span class="caret"></span>
								</button>
								<ul class="dropdown-menu btn-block" role="menu">
									<li><a href="#intensity">强度</a></li>
									<li><a href="#heightmap">高程图灰度</a></li>
									<li><a href="#heightmap-inv">高程图灰度(反转)</a></li>
								</ul>
							</div>
						</div>
						<div class="labeled-controls">
							<h4>强度混合</h4>
							<h5>与颜色混合的强度比例</h5>
							<div id="blending"></div>
							<div class="clearfix blend-factor">
								<div class="pull-left">全部颜色</div>
								<div class="pull-right">全部强度</div>
							</div>
						</div>
						<div class="labeled-controls">
							<h4>强度缩放</h4>
							<h5>缩小强度值范围,仅适用于从点源获取的强度值</h5>
							<div id="intensity"></div>
						</div>
					</div>
				</div>

				<div class="section">
					<div class="p-head">
						<h3>工具</h3>
					</div>
					<div class="p-body">
						<div class="labeled-controls">
							<h4>淹没</h4>
							<h5>启用淹没平面并使用滑块进行操作</h5>
							<div id="inun-container"></div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="listener"></div>

		<!-- 模态框 -->
		<div class="modal fade" id="creditsPage" tabindex="-1" role="dialog" aria-labelledby="creditsPageModal" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						 <h4 class="modal-title">plas.io 数据来源</h4>
					</div>
					<div class="modal-body">
						<h4>以下数据文件的原始来源应得到认可</h4>
						<ul>
							<li>奥茨恩体育场 -- <a href="http://www.linkedin.com/pub/aaron-reyna/82/619/894">Aaron Reyna</a>, <a href="http://www.watershedsciences.com/">Watershed Sciences, Inc.</a>
							</li>
							<li>圣海伦斯山 -- <a href="http://www.linkedin.com/in/howardbutler">Howard Butler</a>, <a href="http://hobu.co">Hobu, Inc.</a>. USGS LiDAR + NAIP.
							</li>
							<li>半穹顶 -- <a href="http://www.linkedin.com/in/howardbutler">Howard Butler</a>, <a href="http://hobu.co">Hobu, Inc.</a> USGS LiDAR + NAIP.
							</li>
							<li>航天飞机 -- 数据由史密森尼国家航空航天博物馆、史蒂文·F·乌德瓦尔-哈齐中心和美国陆军工程兵团提供, <a href="http://www.crrel.usace.army.mil/">冷区研究与工程实验室</a>.
							</li>
							<li>爱荷华锡达福尔斯大学大道 -- 爱荷华州交通部</li>
						</ul>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div>
			</div>
		</div>

		<!-- 模态框 -->
		<div class="modal fade" id="openGreyhoundModal" tabindex="-1" role="dialog" aria-labelledby="openGreyhoundPage" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						 <h4 class="modal-title">打开Greyhound源</h4>
					</div>
					<div class="modal-body ui-panel">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-warning" data-dismiss="modal">关闭</button>
						<button type="button" class="btn btn-primary">打开管道</button>
					</div>
				</div>
			</div>
		</div>

		<!-- 模态框 -->
		<div class="modal fade" id="scalesPage" data-keyboard="false" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="scalesPageLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						 <h4 class="modal-title">指定投影</h4>
					</div>
					<div class="modal-body">
						<div style='text-align: center;padding-bottom: 10px;'>
							<h4 style="font-weight: bold">数据似乎不在投影坐标空间中。</h4>
							<h4 style="color:#999">请指明您想要做什么：</h4>
						</div>
						<button type="button" class="btn btn-primary btn-lg btn-block" data-value="0">保持原样</button>
						<button type="button" class="btn btn-success btn-lg btn-block" data-value="1">将X/Y缩放为米,Z为米</button>
						<button type="button" class="btn btn-info btn-lg btn-block" data-value="2">将X/Y缩放为米,Z为英尺</button>
					</div>
					<div class="modal-footer">
					</div>
				</div>
			</div>
		</div>

		<!-- 模态框 -->
		<div class="modal fade" id="docsPage" tabindex="-1" role="dialog" aria-labelledby="scalesPageLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title">plasio 文档</h4>
					</div>
					<div class="modal-body">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
					</div>
				</div>
			</div>
		</div>

		<script src="bad.js"></script>
		<script src="client.js"></script>
		<script type="x-shader/x-vertex" id="vertexshader">
			uniform float pointSize;
			uniform float intensityBlend;
			uniform float maxColorComponent;

			uniform float rgb_f;
			uniform float intensity_f;
			uniform float class_f;
			uniform float height_f;
			uniform float iheight_f;
			uniform float map_f;
			uniform float imap_f;

			uniform vec3 xyzScale;

			uniform float clampLower;
			uniform float clampHigher;
			uniform float colorClampLower;
			uniform float colorClampHigher;
			uniform vec2  zrange;
			uniform vec3  offsets;
			uniform sampler2D map;
			uniform vec2  klassRange;

			attribute vec3 color;
			attribute float intensity;
			attribute float classification;

			varying vec4 col;
			varying vec3 fpos;


			void main() {
				fpos = ((position.xyz - offsets) * xyzScale).xzy * vec3(-1, 1, 1);

				vec4 mvPosition = modelViewMatrix * vec4( fpos, 1.0 );
				gl_Position = projectionMatrix * mvPosition;
				float nheight = (position.z - zrange.x) / (zrange.y - zrange.x);

				float nhclamp = (nheight - colorClampLower) / (colorClampHigher - colorClampLower);

				// compute color channels
				//
				vec3 norm_color = color / maxColorComponent;
				vec3 map_color = texture2D(map, vec2(nhclamp, 0.5)).rgb;
				vec3 inv_map_color = texture2D(map, vec2(1.0 - nhclamp, 0.5)).rgb;

				float iklass = (classification - klassRange.x) / (klassRange.y - klassRange.x);
				vec3 class_color = texture2D(map, vec2(iklass, 0.5)).rgb;

				// compute intensity channels
				float i = (intensity - clampLower) / (clampHigher - clampLower);
				vec3 intensity_color = vec3(i, i, i);


				vec3 height_color = vec3(nheight, nheight, nheight);
				vec3 inv_height_color = vec3(1.0 - nheight, 1.0 - nheight, 1.0 - nheight);

				// turn the appropriate channels on
				//
				vec3 color_source = norm_color * rgb_f +
									class_color * class_f +
									map_color * map_f +
									inv_map_color * imap_f;

				vec3 intensity_source = intensity_color * intensity_f +
										height_color * height_f +
										inv_height_color * iheight_f;

				// blend and return
				gl_PointSize = pointSize;
				col = vec4(mix(color_source, intensity_source, intensityBlend), 1.0);
			}
		</script>
		<script type="x-shader/x-fragment" id="fragmentshader">
			uniform vec4 planes[6];
			uniform int do_plane_clipping;

			varying vec4 col;
			varying vec3 fpos;

			void main() {
				if (do_plane_clipping > 0) {
					for(int i = 0 ; i < 6 ; i ++) {
						if (dot(planes[i], vec4(fpos, 1.0)) < 0.0)
							discard;
					}
				}

				gl_FragColor = col;
			}
		</script>
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			 m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-48519660-1', 'plas.io');
			ga('send', 'pageview');

		</script>
	</body>
</html>

